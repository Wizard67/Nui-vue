webpackJsonp([11],{201:function(e,t,n){var a=n(2)(n(301),n(269),null,null);e.exports=a.exports},269:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("div",{ref:"three",staticStyle:{width:"100%",height:"30rem"}})])},staticRenderFns:[]}},281:function(e,t,n){n(283);var a=n(5).Object;e.exports=function(e,t){return a.create(e,t)}},282:function(e,t,n){n(284);var a=n(5).Object;e.exports=function(e,t){return a.defineProperties(e,t)}},283:function(e,t,n){var a=n(26);a(a.S,"Object",{create:n(45)})},284:function(e,t,n){var a=n(26);a(a.S+a.F*!n(6),"Object",{defineProperties:n(71)})},285:function(e,t,n){e.exports={default:n(281),__esModule:!0}},286:function(e,t,n){e.exports={default:n(282),__esModule:!0}},301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(28),r=n.n(a),i=n(14);n(318),n(319),n(317);t.default={data:function(){return{el:{},camera:{},scene:{},renderer:{},mouseX:0,mouseY:0,width:0,height:0,windowHalfX:0,windowHalfY:0,mesh:{}}},computed:{},methods:{init:function(){var e=this;this.camera=new i.PerspectiveCamera(75,this.width/this.height,1,1e4),this.camera.position.set(0,100,150);var t=new i.PointLight(16777215,.6);t.position.set(80,90,150);var n=new i.AmbientLight(10066329);this.scene=new i.Scene,this.scene.add(t),this.scene.add(n),this.scene.add(this.camera),this.renderer=new i.WebGLRenderer({alpha:!0,antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.el.appendChild(this.renderer.domElement),this.getObject().then(function(t){e.scene.add(e.mesh),e.render()});var a=new i.OrbitControls(this.camera,this.renderer.domElement);a.target.set(0,0,0),a.update(),a.addEventListener("change",this.throttle(this.render,50)),window.addEventListener("resize",this.throttle(this.onWindowResize,50),!1)},onWindowResize:function(){this.getSize(),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.render()},render:function(){this.renderer.render(this.scene,this.camera)},getSize:function(){this.width=this.el.offsetWidth,this.height=this.el.offsetHeight},getObject:function(){var e=this,t=new i.MTLLoader,n=new i.OBJLoader;return new r.a(function(a,r){t.load("./static/obj.mtl",function(t){t.preload(),n.setMaterials(t),n.load("./static/obj.obj",function(t){t.scale.multiplyScalar(5),e.mesh=t,a("ok")})})})}},mounted:function(){this.el=this.$refs.three,this.getSize(),this.init()}}},317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(286),r=n.n(a),i=n(285),o=n.n(i),s=n(14);s.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*V.autoRotateSpeed}function a(){return Math.pow(.95,V.zoomSpeed)}function r(e){D.theta-=e}function i(e){D.phi-=e}function o(e){V.object instanceof s.PerspectiveCamera?B/=e:V.object instanceof s.OrthographicCamera?(V.object.zoom=Math.max(V.minZoom,Math.min(V.maxZoom,V.object.zoom*e)),V.object.updateProjectionMatrix(),Z=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),V.enableZoom=!1)}function c(e){V.object instanceof s.PerspectiveCamera?B*=e:V.object instanceof s.OrthographicCamera?(V.object.zoom=Math.max(V.minZoom,Math.min(V.maxZoom,V.object.zoom/e)),V.object.updateProjectionMatrix(),Z=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),V.enableZoom=!1)}function h(e){X.set(e.clientX,e.clientY)}function l(e){Q.set(e.clientX,e.clientY)}function u(e){K.set(e.clientX,e.clientY)}function d(e){G.set(e.clientX,e.clientY),W.subVectors(G,X);var t=V.domElement===document?V.domElement.body:V.domElement;r(2*Math.PI*W.x/t.clientWidth*V.rotateSpeed),i(2*Math.PI*W.y/t.clientHeight*V.rotateSpeed),X.copy(G),V.update()}function p(e){$.set(e.clientX,e.clientY),ee.subVectors($,Q),ee.y>0?o(a()):ee.y<0&&c(a()),Q.copy($),V.update()}function m(e){J.set(e.clientX,e.clientY),q.subVectors(J,K),ae(q.x,q.y),K.copy(J),V.update()}function f(e){}function b(e){e.deltaY<0?c(a()):e.deltaY>0&&o(a()),V.update()}function v(e){switch(e.keyCode){case V.keys.UP:ae(0,V.keyPanSpeed),V.update();break;case V.keys.BOTTOM:ae(0,-V.keyPanSpeed),V.update();break;case V.keys.LEFT:ae(V.keyPanSpeed,0),V.update();break;case V.keys.RIGHT:ae(-V.keyPanSpeed,0),V.update()}}function g(e){X.set(e.touches[0].pageX,e.touches[0].pageY)}function w(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);Q.set(0,a)}function x(e){K.set(e.touches[0].pageX,e.touches[0].pageY)}function E(e){G.set(e.touches[0].pageX,e.touches[0].pageY),W.subVectors(G,X);var t=V.domElement===document?V.domElement.body:V.domElement;r(2*Math.PI*W.x/t.clientWidth*V.rotateSpeed),i(2*Math.PI*W.y/t.clientHeight*V.rotateSpeed),X.copy(G),V.update()}function y(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);$.set(0,r),ee.subVectors($,Q),ee.y>0?c(a()):ee.y<0&&o(a()),Q.copy($),V.update()}function O(e){J.set(e.touches[0].pageX,e.touches[0].pageY),q.subVectors(J,K),ae(q.x,q.y),K.copy(J),V.update()}function L(e){}function j(e){if(!1!==V.enabled){switch(e.preventDefault(),e.button){case V.mouseButtons.ORBIT:if(!1===V.enableRotate)return;h(e),I=N.ROTATE;break;case V.mouseButtons.ZOOM:if(!1===V.enableZoom)return;l(e),I=N.DOLLY;break;case V.mouseButtons.PAN:if(!1===V.enablePan)return;u(e),I=N.PAN}I!==N.NONE&&(document.addEventListener("mousemove",M,!1),document.addEventListener("mouseup",P,!1),V.dispatchEvent(S))}}function M(e){if(!1!==V.enabled)switch(e.preventDefault(),I){case N.ROTATE:if(!1===V.enableRotate)return;d(e);break;case N.DOLLY:if(!1===V.enableZoom)return;p(e);break;case N.PAN:if(!1===V.enablePan)return;m(e)}}function P(e){!1!==V.enabled&&(f(e),document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",P,!1),V.dispatchEvent(U),I=N.NONE)}function T(e){!1===V.enabled||!1===V.enableZoom||I!==N.NONE&&I!==N.ROTATE||(e.preventDefault(),e.stopPropagation(),b(e),V.dispatchEvent(S),V.dispatchEvent(U))}function _(e){!1!==V.enabled&&!1!==V.enableKeys&&!1!==V.enablePan&&v(e)}function C(e){if(!1!==V.enabled){switch(e.touches.length){case 1:if(!1===V.enableRotate)return;g(e),I=N.TOUCH_ROTATE;break;case 2:if(!1===V.enableZoom)return;w(e),I=N.TOUCH_DOLLY;break;case 3:if(!1===V.enablePan)return;x(e),I=N.TOUCH_PAN;break;default:I=N.NONE}I!==N.NONE&&V.dispatchEvent(S)}}function A(e){if(!1!==V.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===V.enableRotate)return;if(I!==N.TOUCH_ROTATE)return;E(e);break;case 2:if(!1===V.enableZoom)return;if(I!==N.TOUCH_DOLLY)return;y(e);break;case 3:if(!1===V.enablePan)return;if(I!==N.TOUCH_PAN)return;O(e);break;default:I=N.NONE}}function k(e){!1!==V.enabled&&(L(e),V.dispatchEvent(U),I=N.NONE)}function R(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new s.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:s.MOUSE.LEFT,ZOOM:s.MOUSE.MIDDLE,PAN:s.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return H.phi},this.getAzimuthalAngle=function(){return H.theta},this.saveState=function(){V.target0.copy(V.target),V.position0.copy(V.object.position),V.zoom0=V.object.zoom},this.reset=function(){V.target.copy(V.target0),V.object.position.copy(V.position0),V.object.zoom=V.zoom0,V.object.updateProjectionMatrix(),V.dispatchEvent(F),V.update(),I=N.NONE},this.update=function(){var t=new s.Vector3,a=(new s.Quaternion).setFromUnitVectors(e.up,new s.Vector3(0,1,0)),i=a.clone().inverse(),o=new s.Vector3,c=new s.Quaternion;return function(){var e=V.object.position;return t.copy(e).sub(V.target),t.applyQuaternion(a),H.setFromVector3(t),V.autoRotate&&I===N.NONE&&r(n()),H.theta+=D.theta,H.phi+=D.phi,H.theta=Math.max(V.minAzimuthAngle,Math.min(V.maxAzimuthAngle,H.theta)),H.phi=Math.max(V.minPolarAngle,Math.min(V.maxPolarAngle,H.phi)),H.makeSafe(),H.radius*=B,H.radius=Math.max(V.minDistance,Math.min(V.maxDistance,H.radius)),V.target.add(Y),t.setFromSpherical(H),t.applyQuaternion(i),e.copy(V.target).add(t),V.object.lookAt(V.target),!0===V.enableDamping?(D.theta*=1-V.dampingFactor,D.phi*=1-V.dampingFactor):D.set(0,0,0),B=1,Y.set(0,0,0),!!(Z||o.distanceToSquared(V.object.position)>z||8*(1-c.dot(V.object.quaternion))>z)&&(V.dispatchEvent(F),o.copy(V.object.position),c.copy(V.object.quaternion),Z=!1,!0)}}(),this.dispose=function(){V.domElement.removeEventListener("contextmenu",R,!1),V.domElement.removeEventListener("mousedown",j,!1),V.domElement.removeEventListener("wheel",T,!1),V.domElement.removeEventListener("touchstart",C,!1),V.domElement.removeEventListener("touchend",k,!1),V.domElement.removeEventListener("touchmove",A,!1),document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",P,!1),window.removeEventListener("keydown",_,!1)};var V=this,F={type:"change"},S={type:"start"},U={type:"end"},N={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},I=N.NONE,z=1e-6,H=new s.Spherical,D=new s.Spherical,B=1,Y=new s.Vector3,Z=!1,X=new s.Vector2,G=new s.Vector2,W=new s.Vector2,K=new s.Vector2,J=new s.Vector2,q=new s.Vector2,Q=new s.Vector2,$=new s.Vector2,ee=new s.Vector2,te=function(){var e=new s.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),Y.add(e)}}(),ne=function(){var e=new s.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),Y.add(e)}}(),ae=function(){var e=new s.Vector3;return function(t,n){var a=V.domElement===document?V.domElement.body:V.domElement;if(V.object instanceof s.PerspectiveCamera){var r=V.object.position;e.copy(r).sub(V.target);var i=e.length();i*=Math.tan(V.object.fov/2*Math.PI/180),te(2*t*i/a.clientHeight,V.object.matrix),ne(2*n*i/a.clientHeight,V.object.matrix)}else V.object instanceof s.OrthographicCamera?(te(t*(V.object.right-V.object.left)/V.object.zoom/a.clientWidth,V.object.matrix),ne(n*(V.object.top-V.object.bottom)/V.object.zoom/a.clientHeight,V.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),V.enablePan=!1)}}();V.domElement.addEventListener("contextmenu",R,!1),V.domElement.addEventListener("mousedown",j,!1),V.domElement.addEventListener("wheel",T,!1),V.domElement.addEventListener("touchstart",C,!1),V.domElement.addEventListener("touchend",k,!1),V.domElement.addEventListener("touchmove",A,!1),window.addEventListener("keydown",_,!1),this.update()},s.OrbitControls.prototype=o()(s.EventDispatcher.prototype),s.OrbitControls.prototype.constructor=s.OrbitControls,r()(s.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})},318:function(e,t,n){var a=n(14);a.MTLLoader=function(e){this.manager=void 0!==e?e:a.DefaultLoadingManager},a.MTLLoader.prototype={constructor:a.MTLLoader,load:function(e,t,n,r){var i=this,o=new a.FileLoader(this.manager);o.setPath(this.path),o.load(e,function(e){t(i.parse(e))},n,r)},setPath:function(e){this.path=e},setTexturePath:function(e){this.texturePath=e},setBaseUrl:function(e){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)},setCrossOrigin:function(e){this.crossOrigin=e},setMaterialOptions:function(e){this.materialOptions=e},parse:function(e){for(var t=e.split("\n"),n={},r=/\s+/,i={},o=0;o<t.length;o++){var s=t[o];if(s=s.trim(),0!==s.length&&"#"!==s.charAt(0)){var c=s.indexOf(" "),h=c>=0?s.substring(0,c):s;h=h.toLowerCase();var l=c>=0?s.substring(c+1):"";if(l=l.trim(),"newmtl"===h)n={name:l},i[l]=n;else if(n)if("ka"===h||"kd"===h||"ks"===h){var u=l.split(r,3);n[h]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else n[h]=l}}var d=new a.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(i),d}},a.MTLLoader.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:a.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:a.RepeatWrapping},a.MTLLoader.MaterialCreator.prototype={constructor:a.MTLLoader.MaterialCreator,setCrossOrigin:function(e){this.crossOrigin=e},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var n in e){var a=e[n],r={};t[n]=r;for(var i in a){var o=!0,s=a[i],c=i.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(o=!1)}o&&(r[c]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){function t(e,t){return"string"!=typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t}function n(e,n){if(!o[e]){var a=r.getTextureParams(n,o),i=r.loadTexture(t(r.baseUrl,a.url));i.repeat.copy(a.scale),i.offset.copy(a.offset),i.wrapS=r.wrap,i.wrapT=r.wrap,o[e]=i}}var r=this,i=this.materialsInfo[e],o={name:e,side:this.side};for(var s in i){var c=i[s];if(""!==c)switch(s.toLowerCase()){case"kd":o.color=(new a.Color).fromArray(c);break;case"ks":o.specular=(new a.Color).fromArray(c);break;case"map_kd":n("map",c);break;case"map_ks":n("specularMap",c);break;case"map_bump":case"bump":n("bumpMap",c);break;case"ns":o.shininess=parseFloat(c);break;case"d":c<1&&(o.opacity=c,o.transparent=!0);break;case"Tr":c>0&&(o.opacity=1-c,o.transparent=!0)}}return this.materials[e]=new a.MeshPhongMaterial(o),this.materials[e]},getTextureParams:function(e,t){var n,r={scale:new a.Vector2(1,1),offset:new a.Vector2(0,0)},i=e.split(/\s+/);return n=i.indexOf("-bm"),n>=0&&(t.bumpScale=parseFloat(i[n+1]),i.splice(n,2)),n=i.indexOf("-s"),n>=0&&(r.scale.set(parseFloat(i[n+1]),parseFloat(i[n+2])),i.splice(n,4)),n=i.indexOf("-o"),n>=0&&(r.offset.set(parseFloat(i[n+1]),parseFloat(i[n+2])),i.splice(n,4)),r.url=i.join(" ").trim(),r},loadTexture:function(e,t,n,r,i){var o,s=a.Loader.Handlers.get(e),c=void 0!==this.manager?this.manager:a.DefaultLoadingManager;return null===s&&(s=new a.TextureLoader(c)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),o=s.load(e,n,r,i),void 0!==t&&(o.mapping=t),o}}},319:function(e,t,n){var a=n(14);a.OBJLoader=function(e){this.manager=void 0!==e?e:a.DefaultLoadingManager,this.materials=null,this.regexp={vertex_pattern:/^v\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,normal_pattern:/^vn\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,uv_pattern:/^vt\s+([\d|\.|\+|\-|e|E]+)\s+([\d|\.|\+|\-|e|E]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}},a.OBJLoader.prototype={constructor:a.OBJLoader,load:function(e,t,n,r){var i=this,o=new a.FileLoader(i.manager);o.setPath(this.path),o.load(e,function(e){t(i.parse(e))},n,r)},setPath:function(e){this.path=e},setMaterials:function(e){this.materials=e},_createParserState:function(){var e={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var a={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var a=n.clone(0);a.inherited=!0,this.object.materials.push(a)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var a=this.vertices,r=this.object.geometry.vertices;r.push(a[e+0]),r.push(a[e+1]),r.push(a[e+2]),r.push(a[t+0]),r.push(a[t+1]),r.push(a[t+2]),r.push(a[n+0]),r.push(a[n+1]),r.push(a[n+2])},addVertexLine:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0]),n.push(t[e+1]),n.push(t[e+2])},addNormal:function(e,t,n){var a=this.normals,r=this.object.geometry.normals;r.push(a[e+0]),r.push(a[e+1]),r.push(a[e+2]),r.push(a[t+0]),r.push(a[t+1]),r.push(a[t+2]),r.push(a[n+0]),r.push(a[n+1]),r.push(a[n+2])},addUV:function(e,t,n){var a=this.uvs,r=this.object.geometry.uvs;r.push(a[e+0]),r.push(a[e+1]),r.push(a[t+0]),r.push(a[t+1]),r.push(a[n+0]),r.push(a[n+1])},addUVLine:function(e){var t=this.uvs,n=this.object.geometry.uvs;n.push(t[e+0]),n.push(t[e+1])},addFace:function(e,t,n,a,r,i,o,s,c,h,l,u){var d,p=this.vertices.length,m=this.parseVertexIndex(e,p),f=this.parseVertexIndex(t,p),b=this.parseVertexIndex(n,p);if(void 0===a?this.addVertex(m,f,b):(d=this.parseVertexIndex(a,p),this.addVertex(m,f,d),this.addVertex(f,b,d)),void 0!==r){var v=this.uvs.length;m=this.parseUVIndex(r,v),f=this.parseUVIndex(i,v),b=this.parseUVIndex(o,v),void 0===a?this.addUV(m,f,b):(d=this.parseUVIndex(s,v),this.addUV(m,f,d),this.addUV(f,b,d))}if(void 0!==c){var g=this.normals.length;m=this.parseNormalIndex(c,g),f=c===h?m:this.parseNormalIndex(h,g),b=c===l?m:this.parseNormalIndex(l,g),void 0===a?this.addNormal(m,f,b):(d=this.parseNormalIndex(u,g),this.addNormal(m,f,d),this.addNormal(f,b,d))}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,a=this.uvs.length,r=0,i=e.length;r<i;r++)this.addVertexLine(this.parseVertexIndex(e[r],n));for(var o=0,i=t.length;o<i;o++)this.addUVLine(this.parseUVIndex(t[o],a))}};return e.startObject("",!1),e},parse:function(e){console.time("OBJLoader");var t=this._createParserState();-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var n=e.split("\n"),r="",i="",o="",s=[],c="function"==typeof"".trimLeft,h=0,l=n.length;h<l;h++)if(r=n[h],r=c?r.trimLeft():r.trim(),0!==r.length&&"#"!==(i=r.charAt(0)))if("v"===i)if(" "===(o=r.charAt(1))&&null!==(s=this.regexp.vertex_pattern.exec(r)))t.vertices.push(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]));else if("n"===o&&null!==(s=this.regexp.normal_pattern.exec(r)))t.normals.push(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]));else{if("t"!==o||null===(s=this.regexp.uv_pattern.exec(r)))throw new Error("Unexpected vertex/normal/uv line: '"+r+"'");t.uvs.push(parseFloat(s[1]),parseFloat(s[2]))}else if("f"===i)if(null!==(s=this.regexp.face_vertex_uv_normal.exec(r)))t.addFace(s[1],s[4],s[7],s[10],s[2],s[5],s[8],s[11],s[3],s[6],s[9],s[12]);else if(null!==(s=this.regexp.face_vertex_uv.exec(r)))t.addFace(s[1],s[3],s[5],s[7],s[2],s[4],s[6],s[8]);else if(null!==(s=this.regexp.face_vertex_normal.exec(r)))t.addFace(s[1],s[3],s[5],s[7],void 0,void 0,void 0,void 0,s[2],s[4],s[6],s[8]);else{if(null===(s=this.regexp.face_vertex.exec(r)))throw new Error("Unexpected face line: '"+r+"'");t.addFace(s[1],s[2],s[3],s[4])}else if("l"===i){var u=r.substring(1).trim().split(" "),d=[],p=[];if(-1===r.indexOf("/"))d=u;else for(var m=0,f=u.length;m<f;m++){var b=u[m].split("/");""!==b[0]&&d.push(b[0]),""!==b[1]&&p.push(b[1])}t.addLineGeometry(d,p)}else if(null!==(s=this.regexp.object_pattern.exec(r))){var v=(" "+s[0].substr(1).trim()).substr(1);t.startObject(v)}else if(this.regexp.material_use_pattern.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(this.regexp.material_library_pattern.test(r))t.materialLibraries.push(r.substring(7).trim());else{if(null===(s=this.regexp.smoothing_pattern.exec(r))){if("\0"===r)continue;throw new Error("Unexpected line: '"+r+"'")}var g=s[1].trim().toLowerCase();t.object.smooth="1"===g||"on"===g;var w=t.object.currentMaterial();w&&(w.smooth=t.object.smooth)}t.finalize();var x=new a.Group;x.materialLibraries=[].concat(t.materialLibraries);for(var h=0,l=t.objects.length;h<l;h++){var E=t.objects[h],y=E.geometry,O=E.materials,L="Line"===y.type;if(0!==y.vertices.length){var j=new a.BufferGeometry;j.addAttribute("position",new a.BufferAttribute(new Float32Array(y.vertices),3)),y.normals.length>0?j.addAttribute("normal",new a.BufferAttribute(new Float32Array(y.normals),3)):j.computeVertexNormals(),y.uvs.length>0&&j.addAttribute("uv",new a.BufferAttribute(new Float32Array(y.uvs),2));for(var M=[],P=0,T=O.length;P<T;P++){var _=O[P],w=void 0;if(null!==this.materials&&(w=this.materials.create(_.name),L&&w&&!(w instanceof a.LineBasicMaterial))){var C=new a.LineBasicMaterial;C.copy(w),w=C}w||(w=L?new a.LineBasicMaterial:new a.MeshPhongMaterial,w.name=_.name),w.shading=_.smooth?a.SmoothShading:a.FlatShading,M.push(w)}var A;if(M.length>1){for(var P=0,T=O.length;P<T;P++){var _=O[P];j.addGroup(_.groupStart,_.groupCount,P)}A=L?new a.LineSegments(j,M):new a.Mesh(j,M)}else A=L?new a.LineSegments(j,M[0]):new a.Mesh(j,M[0]);A.name=E.name,x.add(A)}}return console.timeEnd("OBJLoader"),x}}}});